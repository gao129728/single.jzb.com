{include file="public/header" /}
<body class="gray-bg">
<link href="__JS__/plugins/jquery-ui/jquery-ui.min.css" rel="stylesheet">
<style type="text/css">
    .nav-tabs input{display:none;}
    .nav-tabs.nav>li>a{padding:10px 20px; color:#999;}
    .nav.nav-tabs li.hidden-box{display:none;}
    .tab-content > .hidden-box{display:none;}
    .param-set-box .set-item{width:100%; margin:0;}
    .param-set-box .item .lcs_wrap{ vertical-align: top; padding-right:30px;}
</style>
<div class="wrapper wrapper-content animated fadeInRight">
    <div class="row">
        <div class="col-sm-12">
            <div class="ibox float-e-margins">
                <div class="ibox-title">
                    <h5>首页管理</h5>
                </div>
                <div class="ibox-content clearfix" style="padding-top:20px;">
                    {include file="structure/global" /}
                    <div class="col-sm-8">
                        <form class="form-horizontal" name="edit_module" id="edit_module" method="post" action="{:url('edit_module')}">
                            <input type="hidden" name="id" value="{$module_id}">
                            <div class="form-group">
                                <label class="col-sm-2" style="font-weight: 100; padding-left:20px; color:#ff6600;; font-size: 15px;">编辑子版块</label>
                            </div>
                            <div class="hr-line-dashed"></div>
                            <div class="form-group">
                                <label class="col-sm-2 control-label">所属模块：</label>
                                <div class="input-group col-sm-4">
                                    <input type="text" class="form-control" disabled="disabled" value="{$structure_name}">
                                </div>
                            </div>
                            <div class="hr-line-dashed"></div>
                            <div class="form-group">
                                <label class="col-sm-2 control-label">子版块标题：</label>
                                <div class="input-group col-sm-4">
                                    <input type="text" id="title" class="form-control" name="title" value="{$module.title}">
                                </div>
                            </div>
                            <div class="hr-line-dashed"></div>
                            <div class="form-group">
                                <label class="col-sm-2 control-label">子版块宽度：</label>
                                <div class="input-group col-sm-1">
                                    <input id="width" type="text" class="form-control input_wd1" name="width" value="{$module.width}">
                                    <span style="position: absolute; line-height: 30px; top:0; right:-20px;">px</span>
                                    <span class="help-question" style="left:120%;"><a data-toggle="tooltip" data-placement="auto right" title="为0则表示宽度100%"><i class="fa fa-question-circle-o"></i></a></span>
                                </div>
                            </div>
                            <div class="hr-line-dashed"></div>
                            <div class="form-group">
                                <label class="col-sm-2 control-label">标题样式：</label>
                                <div class="input-group col-sm-8">
                                    <div class="radio i-checks">
                                        <input type="radio" name='titleStyle' value="1" {if $module.titleStyle eq 1}checked{/if}/>标题样式1&nbsp;&nbsp;&nbsp;&nbsp;
                                        <input type="radio" name='titleStyle' value="2" {if $module.titleStyle eq 2}checked{/if}/>标题样式2&nbsp;&nbsp;&nbsp;&nbsp;
                                        <input type="radio" name='titleStyle' value="3" {if $module.titleStyle eq 3}checked{/if}/>标签切换&nbsp;&nbsp;&nbsp;&nbsp;
                                        <input type="radio" name='titleStyle' value="4" {if $module.titleStyle eq 4}checked{/if}/>自定义&nbsp;&nbsp;&nbsp;&nbsp;
                                        <input type="radio" name='titleStyle' value="0" {if $module.titleStyle eq 0}checked{/if}/>无标题
                                    </div>
                                </div>
                            </div>
                            <div class="tit-sub {if $module.titleStyle neq 1}hidden-box{/if}">
                                <div class="hr-line-dashed"></div>
                                <div class="form-group">
                                    <label class="col-sm-2 control-label">副标题：</label>
                                    <div class="input-group col-sm-4">
                                        <input type="text" class="form-control" name="sub_title" value="{$module.sub_title}">
                                    </div>
                                </div>
                            </div>
                            <div class="tit-more {if $module.titleStyle neq 2 and $module.titleStyle eq 3}hidden-box{/if}">
                                <div class="hr-line-dashed"></div>
                                <div class="form-group">
                                    <label class="col-sm-2 control-label">显示"更多"：</label>
                                    <div class="col-sm-6 input-group">
                                        <input type="checkbox" name="isMore" value="1" class="lcs_check" lcs-text="是|否" autocomplete="off" {if $module.isMore eq 1}checked{/if}/>
                                    </div>
                                </div>
                            </div>
                            <div class="tit-pic {if $module.titleStyle neq 4}hidden-box{/if}">
                                <div class="hr-line-dashed"></div>
                                <div class="form-group">
                                    <label class="col-sm-2 control-label">标题图片：</label>
                                    <div class="col-sm-4 input-group">
                                        <div class="uploadImg-box">
                                            <input type="file" name="titPic" id="titPic" class="imgFile" onchange="previewImage(this)"/>
                                            <div class="up-img {if $module.titPic neq ''}hidden-box{/if}"><i class="fa fa-cloud-upload"></i><p>点击上传图片</p></div>
                                            {if $module.titPic neq ''}
                                            <input type="checkbox" name="deltitPic" class="input-del" value="1" />
                                            <div class="imgView"><img src="__UPLOAD_PATH__/{$module.titPic}"/></div>
                                            {/if}
                                            <div class="uploadCover">
                                                <div class="ulinfo clearfix">
                                                    <span class="up-btn"><i class="fa fa-cloud-upload"></i></span>
                                                    <span class="up-del"><i class="fa fa-close"></i></span>
                                                </div>
                                            </div>
                                        </div>
                                        <span class="help-question"><a data-toggle="tooltip" data-placement="auto right" title="上传自定义标题样式图片"><i class="fa fa-question-circle-o"></i></a></span>
                                    </div>
                                </div>
                            </div>
                            <div class="hr-line-dashed"></div>
                            <div class="form-group">
                                <label class="col-sm-2 control-label">内容来源：</label>
                                <div class="content-source {if $module.titleStyle eq 3}hidden-box{/if}">
                                    <div class="col-sm-3 input-group">
                                        <select class="form-control" name="cateId" id='cateId'>
                                            <option value="">请选择栏目分类</option>
                                            {volist name="cate" id="vo"}
                                            <option value="{$vo.id}" {if $module.cateId eq $vo.id}selected{/if}>{$vo.lefthtml}{$vo.name}</option>
                                            {/volist}
                                        </select>
                                    </div>
                                </div>
                                <div class="title-source {if $module.titleStyle neq 3}hidden-box{/if}">
                                    <div class="col-sm-7 input-group">
                                        <table class="table table-bordered table-hover">
                                            <thead>
                                                <tr class="long-tr">
                                                    <th width="12%">排序</th>
                                                    <th width="38%">标签名称</th>
                                                    <th width="38%">内容来源</th>
                                                    <th width="15%"><a href="javascript:;" id="add-attribute"><i class="fa fa-plus-square"></i></a></th>
                                                </tr>
                                            </thead>
                                            <script id="select-template" type="text/html">
                                                <select class="form-control" name="attr_cate[]">
                                                    <option value="">请选择栏目分类</option>
                                                    {volist name="cate" id="vo"}
                                                    <option value="{$vo.id}">{$vo.lefthtml}{$vo.name}</option>
                                                    {/volist}
                                                </select>
                                            </script>
                                            <tbody id="list-attribute">
                                                {if $module.title_source}
                                                    {volist name="module['title_source']" id="item"}
                                                    <tr class="long-td">
                                                        <td><span class="fa fa-arrows" data-toggle="tooltip" title="拖拽我"></span></td>
                                                        <td><input type="text" class="form-control" name="attr_name[]" value="{$item.name}"></td>
                                                        <td class="select-cate">
                                                            <select class="form-control" name="attr_cate[]">
                                                                <option value="">请选择栏目分类</option>
                                                                {volist name="cate" id="vo"}
                                                                <option value="{$vo.id}" {if $item.cate eq $vo.id}selected{/if}>{$vo.lefthtml}{$vo.name}</option>
                                                                {/volist}
                                                            </select>
                                                        </td>
                                                        <td><i class="fa fa-times-circle fa-lg del-table-tr"></i></td>
                                                    </tr>
                                                    {/volist}
                                                {/if}
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            <div class="hr-line-dashed"></div>
                            <div class="form-group">
                                <label class="col-sm-2 control-label">显示方式：</label>
                                <div class="col-sm-9 input-group">
                                    <div class="panel-options">
                                        <ul class="nav nav-tabs">
                                            {volist name="module_style_param" id="vo"}
                                            <li class="nav-tab-{$key} {if ($key eq 4 or $key eq 5) and $module.titleStyle eq 3} hidden-box{elseif $module.module_style eq $key/} active{/if}">
                                            <a data-toggle="tab" href="#tab-{$key}" aria-expanded="{$module.module_style == $key? 'true':'false'}">{$vo.style}</a>
                                            <input type="radio" name="module_style" value="{$key}" {if $module.module_style eq $key}checked{/if} />
                                            </li>
                                            {/volist}
                                        </ul>
                                    </div>
                                    <div class="tab-content">
                                        <div id="tab-1" class="tab-pane {if $module.module_style eq 1}active{/if}">
                                            <div class="param-set-box">
                                                <div class="set-item">
                                                    <input type="hidden" name="paramCnt[1]" value="12">
                                                    <div class="item clearfix">
                                                        <label class="item-label">显示个数</label>
                                                        <div class="con">
                                                            <span>总数</span><input type="text" class="text checknum" name='styleParam[1][0]' value="{$styleParam[1][0]}"/>
                                                            <span style="padding-left:17px;">每行个数</span><input type="text checknum" class="text checknum" name='styleParam[1][1]' value="{$styleParam[1][1]}"/>
                                                            <em><i class="fa fa-info-circle"></i> 若图片滚动，则为滚动可见图片个数</em>
                                                        </div>
                                                    </div>
                                                    <div class="item clearfix">
                                                        <label class="item-label">图片尺寸</label>
                                                        <div class="con">
                                                            <span>宽度</span><input type="text" class="text checknum" name='styleParam[1][2]' value="{$styleParam[1][2]}"/><b>px</b>
                                                            <span>高度</span><input type="text" class="text checknum" name='styleParam[1][3]' value="{$styleParam[1][3]}"/><b>px</b>
                                                        </div>
                                                    </div>
                                                    <div class="item clearfix">
                                                        <label class="item-label">图片边框</label>
                                                        <div class="con">
                                                            <input type="checkbox" name="styleParam[1][4]" value="1" class="lcs_check" lcs-text="显示|隐藏" autocomplete="off" {if $styleParam[1][4] eq 1}checked{/if}/>
                                                        </div>
                                                    </div>
                                                    <div class="item clearfix">
                                                        <label class="item-label">图片标题</label>
                                                        <div class="con">
                                                            <input type="checkbox" name="styleParam[1][5]" value="1" class="lcs_check" lcs-text="显示|隐藏" autocomplete="off" {if $styleParam[1][5] eq 1}checked{/if}/>
                                                            <span>标题字数</span><input type="text" class="text checknum" name='styleParam[1][6]' value="{$styleParam[1][6]}"/>
                                                            <em><i class="fa fa-info-circle"></i> 为0则全部显示</em>
                                                        </div>
                                                    </div>
                                                    <div class="item clearfix">
                                                        <label class="item-label">简介</label>
                                                        <div class="con">
                                                            <input type="checkbox" name="styleParam[1][7]" value="1" class="lcs_check" lcs-text="显示|隐藏" autocomplete="off" {if $styleParam[1][7] eq 1}checked{/if}/>
                                                            <span>简介字数</span><input type="text" class="text checknum" name='styleParam[1][8]' value="{$styleParam[1][8]}"/>
                                                            <em><i class="fa fa-info-circle"></i> 为0则全部显示</em>
                                                        </div>
                                                    </div>
                                                    <div class="item clearfix">
                                                        <label class="item-label">详情按钮</label>
                                                        <div class="con"><input type="checkbox" name="styleParam[1][9]" value="1" class="lcs_check" lcs-text="显示|隐藏" autocomplete="off" {if $styleParam[1][9] eq 1}checked{/if}/></div>
                                                    </div>
                                                    <div class="item clearfix">
                                                        <label class="item-label label-tit">滚动设置</label>
                                                    </div>
                                                    <div class="item clearfix">
                                                        <label class="item-label">是否滚动</label>
                                                        <div class="con"><input type="checkbox" name="styleParam[1][10]" value="1" class="lcs_check" lcs-text="是|否" autocomplete="off" {if $styleParam[1][10] eq 1}checked{/if}/></div>
                                                    </div>
                                                    <div class="item clearfix">
                                                        <label class="item-label">滚动方式</label>
                                                        <div class="con">
                                                            <div class="radio i-checks">
                                                                <input type="radio" name='styleParam[1][11]' value="0" {if $styleParam[1][11] eq 0}checked{/if}/>间断滚动&nbsp;&nbsp;&nbsp;&nbsp;
                                                                <input type="radio" name='styleParam[1][11]' value="1" {if $styleParam[1][11] eq 1}checked{/if}/>连续滚动
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="item clearfix">
                                                        <label class="item-label">显示左右按钮</label>
                                                        <div class="con"><input type="checkbox" name="styleParam[1][12]" value="1" class="lcs_check" lcs-text="是|否" autocomplete="off" {if $styleParam[1][12] eq 1}checked{/if}/></div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div id="tab-2" class="tab-pane {if $module.module_style eq 2}active{/if}">
                                            <div class="param-set-box">
                                                <div class="set-item">
                                                    <input type="hidden" name="paramCnt[2]" value="11">
                                                    <div class="item clearfix">
                                                        <label class="item-label">显示个数</label>
                                                        <div class="con"><input type="text" class="text checknum" name='styleParam[2][0]' value="{$styleParam[2][0]}"/></div>
                                                    </div>
                                                    <div class="item clearfix">
                                                        <label class="item-label">标题字数</label>
                                                        <div class="con">
                                                            <input type="text" class="text checknum" name='styleParam[2][1]' value="{$styleParam[2][1]}"/>
                                                            <em><i class="fa fa-info-circle"></i> 为0则全部显示</em>
                                                        </div>
                                                    </div>
                                                    <div class="item clearfix">
                                                        <label class="item-label">显示日期</label>
                                                        <div class="con"><input type="checkbox" name="styleParam[2][2]" value="1" class="lcs_check" lcs-text="是|否" autocomplete="off" {if $styleParam[2][2] eq 1}checked{/if}/></div>
                                                    </div>
                                                    <div class="item clearfix">
                                                        <label class="item-label">显示简介</label>
                                                        <div class="con">
                                                            <input type="checkbox" name="styleParam[2][3]" value="1" class="lcs_check" lcs-text="是|否" autocomplete="off" {if $styleParam[2][3] eq 1}checked{/if}/>
                                                            <span>简介字数</span><input type="text" class="text checknum" name='styleParam[2][4]' value="{$styleParam[2][4]}"/>
                                                            <em><i class="fa fa-info-circle"></i> 为0则全部显示</em>
                                                        </div>
                                                    </div>
                                                    <div class="item clearfix">
                                                        <label class="item-label">显示左侧图片</label>
                                                        <div class="con">
                                                            <input type="checkbox" name="styleParam[2][5]" value="1" class="lcs_check" lcs-text="是|否" autocomplete="off" {if $styleParam[2][5] eq 1}checked{/if}/>
                                                            <span style="display:inline-block; line-height: 40px;">图片边框</span><input type="checkbox" name="styleParam[2][6]" value="1" class="lcs_check" lcs-text="显示|隐藏" autocomplete="off" {if $styleParam[2][6] eq 1}checked{/if}/>
                                                        </div>
                                                    </div>
                                                    <div class="item clearfix">
                                                        <label class="item-label">图片尺寸</label>
                                                        <div class="con">
                                                            <span>宽度</span><input type="text" class="text checknum" name='styleParam[2][7]' value="{$styleParam[2][7]}"/><b>px</b>
                                                            <span>高度</span><input type="text" class="text checknum" name='styleParam[2][8]' value="{$styleParam[2][8]}"/><b>px</b>
                                                        </div>
                                                    </div>
                                                    <div class="item clearfix">
                                                        <label class="item-label label-tit">滚动设置</label>
                                                    </div>
                                                    <div class="item clearfix">
                                                        <label class="item-label">是否滚动</label>
                                                        <div class="con"><input type="checkbox" name="styleParam[2][9]" value="1" class="lcs_check" lcs-text="是|否" autocomplete="off" {if $styleParam[2][9] eq 1}checked{/if}/></div>
                                                    </div>
                                                    <div class="item clearfix">
                                                        <label class="item-label">滚动方式</label>
                                                        <div class="con">
                                                            <div class="radio i-checks">
                                                                <input type="radio" name='styleParam[2][10]' value="0" {if $styleParam[2][10] eq 0}checked{/if}/>间断滚动&nbsp;&nbsp;&nbsp;&nbsp;
                                                                <input type="radio" name='styleParam[2][10]' value="1" {if $styleParam[2][10] eq 1}checked{/if}/>连续滚动
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="item clearfix">
                                                        <label class="item-label">可视个数</label>
                                                        <div class="con">
                                                            <input type="text" class="text checknum" name='styleParam[2][11]' value="{$styleParam[2][11]}"/>
                                                            <em><i class="fa fa-info-circle"></i> 滚动可见个数</em>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div id="tab-3" class="tab-pane {if $module.module_style eq 3}active{/if}">
                                            <div class="param-set-box">
                                                <div class="set-item">
                                                    <input type="hidden" name="paramCnt[3]" value="8">
                                                    <div class="item clearfix">
                                                        <label class="item-label">内容标题</label>
                                                        <div class="con">
                                                            <input type="checkbox" name="styleParam[3][0]" value="1" class="lcs_check" lcs-text="显示|隐藏" autocomplete="off" {if $styleParam[3][0] eq 1}checked{/if}/>
                                                            <span>标题字数</span><input type="text" class="text checknum" name='styleParam[3][1]' value="{$styleParam[3][1]}"/>
                                                            <em><i class="fa fa-info-circle"></i> 为0则全部显示</em>
                                                        </div>
                                                    </div>
                                                    <div class="item clearfix">
                                                        <label class="item-label">内容字数</label>
                                                        <div class="con">
                                                            <input type="text" class="text checknum" name='styleParam[3][2]' value="{$styleParam[3][2]}"/>
                                                            <em><i class="fa fa-info-circle"></i> 为0则全部显示</em>
                                                        </div>
                                                    </div>
                                                    <div class="item clearfix">
                                                        <label class="item-label">详情按钮</label>
                                                        <div class="con"><input type="checkbox" name="styleParam[3][3]" value="1" class="lcs_check" lcs-text="显示|隐藏" autocomplete="off" {if $styleParam[3][3] eq 1}checked{/if}/></div>
                                                    </div>
                                                    <div class="item clearfix">
                                                        <label class="item-label">显示图片</label>
                                                        <div class="con"><input type="checkbox" name="styleParam[3][4]" value="1" class="lcs_check" lcs-text="是|否" autocomplete="off" {if $styleParam[3][4] eq 1}checked{/if}/></div>
                                                    </div>
                                                    <div class="item clearfix">
                                                        <label class="item-label">图片尺寸</label>
                                                        <div class="con">
                                                            <span>宽度</span><input type="text" class="text checknum" name='styleParam[3][5]' value="{$styleParam[3][5]}"/><b>px</b>
                                                            <span>高度</span><input type="text" class="text checknum" name='styleParam[3][6]' value="{$styleParam[3][6]}"/><b>px</b>
                                                        </div>
                                                    </div>
                                                    <div class="item clearfix">
                                                        <label class="item-label">图片边框</label>
                                                        <div class="con">
                                                            <input type="checkbox" name="styleParam[3][7]" value="1" class="lcs_check" lcs-text="显示|隐藏" autocomplete="off" {if $styleParam[3][7] eq 1}checked{/if}/>
                                                        </div>
                                                    </div>
                                                    <div class="item clearfix">
                                                        <label class="item-label">图片位置</label>
                                                        <div class="con">
                                                            <div class="radio i-checks">
                                                                <input type="radio" name='styleParam[3][8]' value="left" {if $styleParam[3][8] eq 'left'}checked{/if}/>左侧&nbsp;&nbsp;&nbsp;&nbsp;
                                                                <input type="radio" name='styleParam[3][8]' value="center" {if $styleParam[3][8] eq 'center'}checked{/if}/>居中&nbsp;&nbsp;&nbsp;&nbsp;
                                                                <input type="radio" name='styleParam[3][8]' value="right" {if $styleParam[3][8] eq 'right'}checked{/if}/>右侧
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div id="tab-4" class="tab-pane {if $module.module_style eq 4}active{/if}">
                                            <script src="/static/admin/ueditor/ueditor.config.js" type="text/javascript"></script>
                                            <script src="/static/admin/ueditor/ueditor.all.js" type="text/javascript"></script>
                                            <div class="col-sm-12" style="padding-bottom:8px;">
                                                <textarea name="styleParam[4]" style="width:100%" id="myEditor">{$module.module_content}</textarea>
                                                <script type="text/javascript">
                                                    var editor = new UE.ui.Editor();
                                                    editor.render("myEditor");
                                                </script>
                                            </div>
                                        </div>
                                        <div id="tab-5" class="tab-pane {if $module.module_style eq 5}active{/if}">
                                            <div class="param-set-box">
                                                <div class="set-item">
                                                    <input type="hidden" name="paramCnt[5]" value="9">
                                                    <div class="item clearfix">
                                                        <label class="item-label">栏目个数</label>
                                                        <div class="con">
                                                            <input type="text" class="text checknum" name='styleParam[5][0]' value="{$styleParam[5][0]}"/>
                                                            <em><i class="fa fa-info-circle"></i> 为0则全部显示</em>
                                                        </div>
                                                    </div>
                                                    <div class="item clearfix custom-tab-cate">
                                                        <label class="item-label">自定义栏目分类</label>
                                                        <div class="con">
                                                            <select class="form-control input_wd2" id="tab-switch-cate">
                                                                <option value="">请选择栏目分类</option>
                                                                {volist name="cate" id="vo"}
                                                                <option value="{$vo.id}">{$vo.lefthtml}{$vo.name}</option>
                                                                {/volist}
                                                            </select>
                                                            <a href="javascript:;" class="add-tab-cate" title="添加栏目分类"><i class="fa fa-plus-square"></i></a>
                                                            <div class="custom-cate-list clearfix {if $styleParam[5][1]}has-cate-single{/if}">
                                                                {volist name="styleParam[5][1]" id="vo"}
                                                                <div class="single"><i class="fa fa-window-close fa-lg"></i><input type="hidden" name="styleParam[5][1][]" value="{$vo}"/></div>
                                                                {/volist}
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="item clearfix">
                                                        <label class="item-label">图片个数</label>
                                                        <div class="con">
                                                            <span>总数</span><input type="text" class="text checknum" name='styleParam[5][2]' value="{$styleParam[5][2]}"/>
                                                            <span style="padding-left:17px;">每行个数</span><input type="text" class="text checknum" name='styleParam[5][3]' value="{$styleParam[5][3]}"/>
                                                        </div>
                                                    </div>
                                                    <div class="item clearfix">
                                                        <label class="item-label">图片标题</label>
                                                        <div class="con">
                                                            <input type="checkbox" name="styleParam[5][4]" value="1" class="lcs_check" lcs-text="显示|隐藏" autocomplete="off" {if $styleParam[5][4] eq 1}checked{/if}/>
                                                            <span>标题字数</span><input type="text" class="text checknum" name='styleParam[5][5]' value="{$styleParam[5][5]}"/>
                                                            <em><i class="fa fa-info-circle"></i> 为0则全部显示</em>
                                                        </div>
                                                    </div>
                                                    <div class="item clearfix">
                                                        <label class="item-label">图片尺寸</label>
                                                        <div class="con">
                                                            <span>宽度</span><input type="text" class="text checknum" name='styleParam[5][6]' value="{$styleParam[5][6]}"/><b>px</b>
                                                            <span>高度</span><input type="text" class="text checknum" name='styleParam[5][7]' value="{$styleParam[5][7]}"/><b>px</b>
                                                        </div>
                                                    </div>
                                                    <div class="item clearfix">
                                                        <label class="item-label">图片边框</label>
                                                        <div class="con">
                                                            <input type="checkbox" name="styleParam[5][8]" value="1" class="lcs_check" lcs-text="显示|隐藏" autocomplete="off" {if $styleParam[5][8] eq 1}checked{/if}/>
                                                        </div>
                                                    </div>
                                                    <div class="item clearfix">
                                                        <label class="item-label">自动切换</label>
                                                        <div class="con"><input type="checkbox" name="styleParam[5][9]" value="1" class="lcs_check" lcs-text="是|否" autocomplete="off" {if $styleParam[5][9] eq 1}checked{/if}/></div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div id="tab-6" class="tab-pane {if $module.module_style eq 6}active{/if}">
                                            <div class="param-set-box">
                                                <div class="set-item">
                                                    <input type="hidden" name="paramCnt[6]" value="8">
                                                    <div class="item clearfix">
                                                        <label class="item-label">显示个数</label>
                                                        <div class="con"><input type="text" class="text checknum" name='styleParam[6][0]' value="{$styleParam[6][0]}"/></div>
                                                    </div>
                                                    <div class="item clearfix">
                                                        <label class="item-label">图片尺寸</label>
                                                        <div class="con">
                                                            <span>宽度</span><input type="text" class="text checknum" name='styleParam[6][1]' value="{$styleParam[6][1]}"/><b>px</b>
                                                            <span>高度</span><input type="text" class="text checknum" name='styleParam[6][2]' value="{$styleParam[6][2]}"/><b>px</b>
                                                        </div>
                                                    </div>
                                                    <div class="item clearfix">
                                                        <label class="item-label">自动切换</label>
                                                        <div class="con"><input type="checkbox" name="styleParam[6][3]" value="1" class="lcs_check" lcs-text="是|否" autocomplete="off" {if $styleParam[6][3] eq 1}checked{/if}/></div>
                                                    </div>
                                                    <div class="item clearfix">
                                                        <label class="item-label">切换效果</label>
                                                        <div class="con">
                                                            <div class="radio i-checks">
                                                                <input type="radio" name='styleParam[6][4]' value="fold" {if $styleParam[6][4] eq 'fold'}checked{/if}/>柔和渐变&nbsp;&nbsp;&nbsp;&nbsp;
                                                                <input type="radio" name='styleParam[6][4]' value="fade" {if $styleParam[6][4] eq 'fade'}checked{/if}/>淡入淡出&nbsp;&nbsp;&nbsp;&nbsp;
                                                                <input type="radio" name='styleParam[6][4]' value="leftLoop" {if $styleParam[6][4] eq 'leftLoop'}checked{/if}/>向左滑动&nbsp;&nbsp;&nbsp;&nbsp;
                                                                <input type="radio" name='styleParam[6][4]' value="topLoop" {if $styleParam[6][4] eq 'topLoop'}checked{/if}/>向上滑动
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="item clearfix">
                                                        <label class="item-label">效果参数</label>
                                                        <div class="con">
                                                            <span>效果时间</span><input type="text" class="text checknum" name='styleParam[6][5]' value="{$styleParam[6][5]}"/>
                                                            <span style="padding-left:15px;">间隔时间</span><input type="text" class="text checknum" name='styleParam[6][6]' value="{$styleParam[6][6]}"/>
                                                        </div>
                                                    </div>
                                                    <div class="item clearfix">
                                                        <label class="item-label">显示左右按钮</label>
                                                        <div class="con"><input type="checkbox" name="styleParam[6][7]" value="1" class="lcs_check" lcs-text="是|否" autocomplete="off" {if $styleParam[6][7] eq 1}checked{/if}/></div>
                                                    </div>
                                                    <div class="item clearfix">
                                                        <label class="item-label">显示圆点按钮</label>
                                                        <div class="con"><input type="checkbox" name="styleParam[6][8]" value="1" class="lcs_check" lcs-text="是|否" autocomplete="off" {if $styleParam[6][8] eq 1}checked{/if}/></div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div id="tab-7" class="tab-pane {if $module.module_style eq 7}active{/if}">
                                            <div class="param-set-box">
                                                <div class="set-item">
                                                    <input type="hidden" name="paramCnt[7]" value="5">
                                                    <div class="item clearfix">
                                                        <label class="item-label">显示个数</label>
                                                        <div class="con"><input type="text" class="text checknum" name='styleParam[7][0]' value="{$styleParam[7][0]}"/></div>
                                                    </div>
                                                    <div class="item clearfix">
                                                        <label class="item-label">标题字数</label>
                                                        <div class="con">
                                                            <input type="text" class="text checknum" name='styleParam[7][1]' value="{$styleParam[7][1]}"/>
                                                            <em><i class="fa fa-info-circle"></i> 为0则全部显示</em>
                                                        </div>
                                                    </div>
                                                    <div class="item clearfix">
                                                        <label class="item-label">内容字数</label>
                                                        <div class="con">
                                                            <input type="text" class="text checknum" name='styleParam[7][2]' value="{$styleParam[7][2]}"/>
                                                            <em><i class="fa fa-info-circle"></i> 为0则全部显示</em>
                                                        </div>
                                                    </div>
                                                    <div class="item clearfix">
                                                        <label class="item-label label-tit">滚动设置</label>
                                                    </div>
                                                    <div class="item clearfix">
                                                        <label class="item-label">是否滚动</label>
                                                        <div class="con"><input type="checkbox" name="styleParam[7][3]" value="1" class="lcs_check" lcs-text="是|否" autocomplete="off" {if $styleParam[7][3] eq 1}checked{/if}/></div>
                                                    </div>
                                                    <div class="item clearfix">
                                                        <label class="item-label">滚动方式</label>
                                                        <div class="con">
                                                            <div class="radio i-checks">
                                                                <input type="radio" name='styleParam[7][4]' value="0" {if $styleParam[7][4] eq 0}checked{/if}/>间断滚动&nbsp;&nbsp;&nbsp;&nbsp;
                                                                <input type="radio" name='styleParam[7][4]' value="1" {if $styleParam[7][4] eq 1}checked{/if}/>连续滚动
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="item clearfix">
                                                        <label class="item-label">可视个数</label>
                                                        <div class="con">
                                                            <input type="text" class="text checknum" name='styleParam[7][5]' value="{$styleParam[7][5]}"/>
                                                            <em><i class="fa fa-info-circle"></i> 滚动可见个数</em>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="hr-line-dashed"></div>
                            <div class="form-group">
                                <label class="col-sm-2 control-label">状&nbsp;态：</label>
                                <div class="col-sm-6 input-group">
                                    <input type="checkbox" name="state" value="1" class="lcs_check" lcs-text="开启|关闭" autocomplete="off" checked/>
                                </div>
                            </div>
                            <div class="hr-line-dashed"></div>
                            <div class="form-group">
                                <div class="col-sm-4 col-sm-offset-2 button-group">
                                    <button class="btn btn-warning" type="submit" style="padding:6px 30px;"><i class="fa fa-save"></i> 保存</button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{include file="public/footer" /}
<script src="/static/admin/js/iColorPicker.js" type="text/javascript"></script>
{include file="structure/global_js" /}
<script type="text/javascript">
    $( "#list-attribute" ).sortable();
    $('input[name="titleStyle"]').on('ifChecked', function(event){
        var val = $(this).val();
        if(val==1){
            $('.tit-sub').show();
        }else{
            $('.tit-sub').hide();
        }
        if(val==2||val==3){
            $('.tit-more').show();
        }else{
            $('.tit-more').hide();
        }
        if(val==3){
            $('.title-source').show();
            $('.content-source').hide();
            $('.nav-tab-4, #tab-4, .nav-tab-5, #tab-5').addClass('hidden-box');
        }else{
            $('.title-source').hide();
            $('.content-source').show();
            $('.nav-tab-4, #tab-4, .nav-tab-5, #tab-5').removeClass('hidden-box');
        }
        if(val == 4){
            $('.tit-pic').show();
        }else{
            $('.tit-pic').hide();
        }
    });

    $('#add-attribute').click(function(){
        var select = $('#select-template').html();
        var htmlStr = '';
        htmlStr += '<tr class="long-td">';
        htmlStr += '<td><span class="fa fa-arrows" data-toggle="tooltip" title="拖拽我"></span></td>';
        htmlStr += '<td><input type="text" class="form-control" name="attr_name[]" value=""></td>';
        htmlStr += '<td>'+ select +'</td>';
        htmlStr += '<td><i class="fa fa-times-circle fa-lg del-table-tr"></i></td>';
        htmlStr += '</tr>';
        $('#list-attribute').append(htmlStr);
        $("#list-attribute .fa-arrows").tooltip();
    });

    $('#list-attribute').on('click','.del-table-tr', function(){
        $(this).parents('.long-td').remove();
    });

    $('.nav-tabs li').click(function(){
        $(this).find('input').prop('checked', true);
        $(this).siblings().find('input').prop('checked', false);
    });

    if($('.custom-cate-list .single').length>0){
        $('.custom-cate-list .single').each(function(){
            var val = $(this).find('input').val();
            var op_text = $('#tab-switch-cate option[value="'+val+'"]').text();
            var single_name = $.trim(op_text.replace(/—/g,''));
            $(this).prepend(single_name);
        });
    }
    $('.add-tab-cate').click(function(){
        var sel_val =  $('#tab-switch-cate').val();
        if(sel_val == ''){
            layer.msg('请选择栏目分类', {icon: 2, time: 1500, shade: 0.1}, function (index) {
                layer.close(index);
            });
            return false;
        }
        var result = true;
        $('.custom-cate-list .single').each(function(){
            var cate_val = $(this).find('input').val();
            if(cate_val == sel_val){
                result = false;
                return false;
            }
        });
        if(!result) return false;
        var text = $('#tab-switch-cate option:selected').text();
        var name = $.trim(text.replace(/—/g,''));
        var html = '<div class="single">'+name+'<i class="fa fa-window-close fa-lg"></i><input type="hidden" name="styleParam[5][1][]" value="'+sel_val+'"/></div>'
        if(!$('.custom-cate-list').hasClass('has-cate-single')){
            $('.custom-cate-list').addClass('has-cate-single');
        }
        $('.custom-cate-list').append(html);
    });

    $('.custom-cate-list').on('click',"i", function(){
        $(this).parent().remove();
        if($('.custom-cate-list .single').length < 1){
            $('.custom-cate-list').removeClass('has-cate-single');
        }
    });

    $(function(){
        $('#edit_module').ajaxForm({
            beforeSubmit: checkForm, 
            success: complete, 
            dataType: 'json'
        });
        
        function checkForm() {
            if ('' == $.trim($('#title').val())) {
                layer.msg('请输入子版块标题', {icon: 2, time: 1500, shade: 0.1}, function (index) {
                    layer.close(index);
                });
                return false;
            }
            if (!isPositiveNum($('#width').val())) {
                layer.msg('请输入正确的子版块宽度', {icon: 5, time: 1500, shade: 0.1}, function (index) {
                    layer.close(index);
                });
                return false;
            }

            var result = true;
            var module_style = $('input[name="module_style"]:checked').val();
            if($('input[name="titleStyle"]:checked').val() == 3){
                if($("input[name='attr_name[]']").length < 1){
                    layer.msg('请增加标题切换标签', {icon: 5,time:1500,shade: 0.1}, function(index){
                        layer.close(index);
                    });
                    return false;
                }

                $("input[name='attr_name[]']").each(function(){
                    if($.trim($(this).val()) == ''){
                        layer.msg('标签名称不能为空', {icon: 5,time:1500,shade: 0.1}, function(index){
                            layer.close(index);
                        });
                        result = false;
                        return false;
                    }
                });
                if(!result){
                    return false;
                }
                $("select[name='attr_cate[]']").each(function(){
                    if($.trim($(this).val()) == ''){
                        layer.msg('请选择内容来源', {icon: 5,time:1500,shade: 0.1}, function(index){
                            layer.close(index);
                        });
                        result = false;
                        return false;
                    }
                });
                if(!result){
                    return false;
                }
                if(module_style == 4 || module_style == 5){
                    layer.msg('请选择显示方式', {icon: 5,time:1500,shade: 0.1}, function(index){
                        layer.close(index);
                    });
                    return false;
                }
            }else if(module_style == 5){
                if ($('#cateId').val() == '' && $('.custom-cate-list .single').length < 1) {
                    layer.msg('请选择内容来源或添加自定义栏目分类', {icon: 5, time: 1500, shade: 0.1}, function (index) {
                        layer.close(index);
                    });
                    return false;
                }
            }else if(module_style != 4){
                if ($('#cateId').val() == '') {
                    layer.msg('请选择内容来源', {icon: 5, time: 1500, shade: 0.1}, function (index) {
                        layer.close(index);
                    });
                    return false;
                }
            }

            $('#tab-'+ module_style +' .checknum').each(function(){
                val = $(this).val();
                if(!isPositiveNum(val)){
                    layer.msg('请输入合法的显示方式设置参数', {icon: 5,time:1500,shade: 0.1}, function(index){
                        layer.close(index);
                    });
                    result = false;
                    return false;
                }
            });
            if(!result){
                return false;
            }

        }

        function complete(data){
            if(data.code==1){
                layer.msg(data.msg, {icon: 6,time:1500,shade: 0.1}, function(index){
                    layer.close(index);
                    location.reload();
                });
            }else{
                layer.msg(data.msg, {icon: 5,time:1500,shade: 0.1});
                return false;   
            }
        }
     
    });
</script>
</body>
</html>